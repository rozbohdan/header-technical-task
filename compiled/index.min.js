const MENU="[data-menu]",MENU_ACTION="[data-menu-action]",MENU_LINK="[data-menu-link]",MENU_LIST_CHILD="[data-menu-list-child]",OPEN_MENU="menuOpen",allMenuLinks=document.querySelectorAll(`${MENU_LINK}`),allMenuListChildren=document.querySelectorAll(`${MENU_LIST_CHILD}`);class Menu{static attach(){(new Menu).init()}init(){this.findMenu()&&this.applyListener()}applyListener(){document.querySelector("*").addEventListener("click",e=>{const n=e.target.closest(MENU_ACTION),t=e.target.closest(MENU),s=e.target.closest(MENU_LINK);if(s&&window.matchMedia("(max-width: 1200px)").matches){e.preventDefault();const n=s.nextElementSibling;this.isOpenedMenuListChild(s)?this.closeMenuListChild(s,n):(this.closeAllMenuListChildren(),this.openMenuListChild(s,n))}else this.closeAllMenuListChildren();this.isCallMenuElement(n)&&(this.isOpened()?this.closeMenu():this.openMenu()),!0!==this.isCallMenuElement(n)&&!0!==this.menuOverlayIsClickedElement(t)&&this.isOpened()&&this.closeMenu()})}isCallMenuElement(e){return e&&OPEN_MENU in e.dataset}findMenu(){const e=document.querySelector(MENU),n=document.querySelector(MENU_ACTION);return!(!e&&!n)&&(this.menu=e,this.menuBtn=n,!0)}isOpened(){return this.menu.classList.contains("menu__list_opened")}isOpenedMenuListChild(e){return e.classList.contains("menu__link_transformed")}closeAllMenuListChildren(){for(let e=0;e<allMenuLinks.length;e++)allMenuLinks[e].classList.remove("menu__link_transformed"),allMenuListChildren[e].classList.remove("menu__list-child_opened")}openMenu(){this.menu.classList.add("menu__list_opened"),this.menuBtn.classList.add("menu__btn_transformed")}closeMenu(){this.menu.classList.remove("menu__list_opened"),this.menuBtn.classList.remove("menu__btn_transformed")}openMenuListChild(e,n){n.classList.add("menu__list-child_opened"),e.classList.add("menu__link_transformed")}closeMenuListChild(e,n){n.classList.remove("menu__list-child_opened"),e.classList.remove("menu__link_transformed")}menuOverlayIsClickedElement(e){return e&&"menu"in e.dataset}}Menu.attach();
